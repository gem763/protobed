{"pub": "businessinsider", "url": "https://kotaku.com.au/2019/10/why-online-game-launches-are-often-a-mess", "downloaded_at": "2019-10-04 02:35:36.251470+00:00", "title": "Why Online Game Launches Are Often A Mess", "language": "en", "text": "Destiny 2: Shadowkeep (Image: Bungie)\n\nOn Wednesday, Destiny 2 players began to see a warning message. A red line stretched across the bottom of their screens, and the text below it stated: \u201cAttention: contacting Destiny 2 servers.\u201d Minutes later, huge numbers of players got booted from the massively-multiplayer online sci-fi shooter.\n\nAt Kotaku, we lost connection at 4:11 pm ET (6:11am Thursday AEST). My character, who had been freshly boosted to power level 750 as part of the day\u2019s grand game-wide overhaul and expansion, disappeared (she returned later).\n\nOn Twitch, nearly all the top streamers\u2019 screens went grey, sporting a message that they were being kicked into a queue to get back in.\n\nTwitch\u2019s page of Destiny 2 streamers, just after 5pm ET on launch day. Image inspired by a Tweet from YouTuber SkillUp.\n\nAbout an hour later, the official support account for the game, @bungiehelp, tweeted that the game was being taken offline: \u201cDestiny 1 and Destiny 2 are being taken offline for emergency maintenance. Please standby for updates.\u201d\n\nBoth Destiny games would remain down for several more hours. Some players fumed on social media and forums. Some said they would patiently wait. Still others were fuming in character, so there was at least something to laugh about: \u201cI quit my job, I left my wife and I didn\u2019t pick up my kids from Soccer Practice just so I can fulfil my Guardian duties. This is unacceptable and I am greatly disappointed.\u201d\n\nAt 8:54 pm ET (10:54am AEST), Bungie Help stated that maintenance was complete. At that point, players were finally able to get back in. The biggest game release of the day had just been offline for about five hours.\n\nTo some people, this was a huge surprise. Bungie, an established studio, has been making and expanding Destiny for years, had delayed the launch of its newest expansion, Shadowkeep, for two weeks, and was now, on October 2, surely ready to launch.\n\nTo others, this was to be expected, a normal occurrence in gaming, where the launch of so many big online games has involved day one server problems.\n\nBut why, despite all the smart people out there making video games, do launches so often go awry?\n\nNevertheless, several game developers at other studios shared with Kotaku their understanding of why this kind of thing happens. Some have worked on big online launches, others have heard about the travails from peers.\n\nGame developer and ardent Destiny player Rami Ismail provided some context by way of a metaphor as extended as a transcontinental railroad. According to him, the problems could be a lack of servers, which would mean a lack of computers needed to handle all connections players are attempting to make to the game. \u201cImagine a train station where there\u2019s not enough tracks, but too many trains,\u201d he said.\n\nOr, he theorised, the issue might be on the client side \u2014 that is, the player\u2019s end, from their console or PC, maybe due to a bug \u2014 that might be sending back too much data for the servers to process: \u201cIt\u2019d be like a station where there\u2019s enough tracks, but a lot of unexpected trains coming in.\u201d\n\n\u201cBasically play Mini Metro,\u201d said developer Rami Ismail, citing the indie game about building rail systems as a good way to see the kind of problems developers working on a network face. (Screenshot: Dinosaur Polo Club)\n\nIsmail also speculated that it could be a problem with the code in the servers slowing down how the servers are processing data from the players\u2019 machines: \u201cIt\u2019d be like a station where there\u2019s enough trains and tracks, but every passenger has to get out of the train, and fill out a form or something.\u201d\n\nOr it could be some third-party code or server that can\u2019t handle the influx of players, but which the developers don\u2019t have as much control over: \u201cSo now there\u2019s a station across the border that\u2019s not sending enough trains, and people are getting stuck at the station.\u201d\n\nAny of these problems could cause a failure in the overall server network for the game, he said. \u201cThat\u2019s a common issue, so it\u2019d offload it to nearby cores or servers. So now this one station is sending trains or passengers to other stations that were already working at capacity. Now those are affected too. The effect ripples through every station available. Some of them might shut down, or not be able to accept more trains.\u201d\n\nAll of these situations are hard to plan for, Ismail said. Testing is possible, but nothing beats the real thing. \u201cWhen the trains start moving for real is usually the first time you can see how everything goes. Maybe the train from station A to station D is actually 2% slower than you thought. Now train station D is slowly filling up, until eventually that failure occurs.\u201d\n\nTop game publishers have the money to scale up when needed, though Bungie itself is notably a self-publishing indie studio for this week\u2019s Destiny release. The studio and the franchise split with the powerful publisher Activision earlier this year.\n\n\u201cWhen a large game has a bad launch it\u2019s usually not due to lack of machines,\u201d said developer Josh Ling. \u201cThey have the machines, but the software running on those machines is causing issues: crashes, system failure etc.\u201d\n\nOne of the error messages appearing on Destiny 2: Shadowkeep\u2019s launch day. The number would tick down, then tick back up, eventually reporting that that the servers were down.\n\nDrew Thaler, a developer who worked for the large studio Naughty Dog for four years, helped maintain or launch multiplayer servers for Uncharted and The Last Of Us games. He now runs an online services company called Mesh. When the PS3\u2019s The Last Of Us was remastered for the PS4, the studio ran into problems even though, in his words, \u201cthe game was almost literally identical.\u201d Unfortunately, he said, the problems stemmed from a piece of tech provided by Sony that hadn\u2019t yet been used at a large scale.\n\n\u201cWhat it looked like to the end user was long matchmaking times,\u201d he said. \u201cThe game code would form a match, and then some of the people wouldn\u2019t be able to directly connect to each other, and the match would be forced to dissolve.\u201d\n\nThe team came up with a workaround, only to discover months later that a minor piece of code \u2014 \"the SSL stack in a Java implementation\" \u2014 was causing the problem. It was an incredibly obscure and low-level problem to be having such a large impact on overall matchmaking, but it did. \u201cIt\u2019s like Google Maps on your phone giving you bad directions... and tracing the reason back to faulty electrical wiring at your house.\u201d\n\nThen Uncharted 4 launched with much more ambitious multiplayer than Naughty Dog had done before: more players, computer-controlled side-kicks, virtual currency, and more, all of which involved new code. \u201cThat\u2019s especially where you run into the problems,\u201d he said. \u201cIt\u2019ll work great in tests, and even in simulations with a few thousand people hitting it, but that first hour, when 100,000 people all log on in the same minute?\n\n\u201cNetwork services aren\u2019t really just a server. They\u2019re complex systems,\u201d he said. \u201cThis server handles matchmaking, this one handles queuing, this one is receiving logs, this one is doing the NAT tunnelling, this one is doing location queries for better matching, this one is handling leaderboards, this one is handling authentication, this one is virtual currency and needs to be especially bulletproof against losing transactions and credits\u2026\u201d Failure can happen at any of those points.\n\nAt times, a developer\u2019s attempt to offer a cool new feature can be catastrophic to the game\u2019s online performance. Late last year, veteran game designer Raph Koster shared a story about the pioneering massively multiplayer game Ultima Online and the noble intention to give the game\u2019s community virtual Christmas trees: \u201cWe didn\u2019t have art for them, so I attached a script to a generic pine that spawned the little coloured gemstones we did have and vertically offset them,\u201d he Tweeted.\n\n\u201cThen they each had a script with periodic callbacks to appear and vanish, so they twinkled. Then we gave one Xmas tree to every player who logged in. Thousands of trees each with twenty callbacks on approx one second intervals. The message queue overloaded on every server and crashed the entire service. On Christmas. I had the week off.\u201d\n\nDestiny 2: Shadowkeep (Screenshot: Bungie)\n\nFar more recently, Ubisoft launched The Division 2, right on the heels of a widely played beta for the game. Just a few days into the full game being available, players found that their turrets, drones and other equippable skills were self-destructing as soon as they had been activated.\n\nThe developers fixed the problem quickly, after discovering that the game\u2019s servers were getting confused by an accumulation of status effects that had been applied to those skills and that eventually stacked up once lots of players were using the game. \u201cIt\u2019s an issue that\u2019s been there probably from the beginning,\u201d one of the game\u2019s developers later explained on a livestream, \u201cbut had just been building up.\u201d The code was fixed and the problem swiftly went away.\n\nIf there are problems that emerge with scale, they show up most painfully when a game is suddenly free. On Wednesday, Bungie didn\u2019t just release a new expansion for its big-budget AAA game Destiny 2. The studio also made most of the released content that preceded it free to play, most assuredly inviting a crush of new players to further stress the game\u2019s online infrastructure.\n\n\u201cAAA F2P is also a massive multiplier on your userbase that you might not fully expect if you\u2019re coming from a non-F2P world,\u201d said Thaler, the ex-Naughty Dog developer. \u201cWe had a F2P weekend for Uncharted (in our beta) and it crushed our servers with 10-20x normal load.\u201d\n\nThursday, Bungie advised players who were getting Weasel or an error called Squirrel to remove Cyrillic characters from their clan name or Steam username, respectively, if possible. (It\u2019s also advised people to try to not have more than 300 friends on Steam, at least for the moment.)\n\nDevelopers we spoke to did not forecast an end to this kind of thing but see ways it may be minimised in the future. The increase of online elements in more and more games, while annoying to some players, is giving more developers experience with making viable online infrastructures and troubleshooting problems quickly.\n\nThird-party operations like U.K.-based Multiplay, which helped handle the massive but pretty smooth of EA and Respawn\u2019s free-to-play battle royale game Apex Legends, also may play an increasingly useful role as games and the people who make them continue to be more ambitious. Even the seemingly omnipresent pre-launch betas, which are easy to dismiss as marketing, actually can help see if the game\u2019s online infrastructure is up to snuff. None of this will eliminate problems, but can help.\n\nGame makers still need to act swiftly to fix things, and relatively speaking, Bungie seems to have done so, turning a collapsing game back into a functioning one in the span of an afternoon. That\u2019s not easy. \u201cYou have to do it under enormous time pressure and get it done yesterday,\u201d Thaler said, \u201cbecause everybody wants to play their favourite game and they can\u2019t do that until you solve it.\u201d", "description": "On Wednesday, Destiny 2 players began to see a warning message. A red line stretched across the bottom of their screens, and the text below it stated: \u201cAttention: contacting Destiny 2 servers.\u201d Minutes later, huge numbers of players got booted from the massively-multiplayer online sci-fi shooter....", "authors": ["Alex Walker", "Stephen Totilo"], "top_image": "https://i.kinja-img.com/gawker-media/image/upload/c_lfill,w_1200,h_628,q_90/sji9nxsofdxpmaa79yu0.jpg", "published_at": "2019-10-04"}